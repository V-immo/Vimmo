<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mijn Advertentie | Vimmo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="dashboard-particulier">
        <!-- Sidebar -->
        <aside class="sidebar">
            <a href="index.html" class="sidebar-brand">
                <span class="logo-v">V</span> <span class="logo-i">I</span><span class="logo-mmo">MMO</span>
            </a>

            <nav class="sidebar-nav">
                <a href="dashboard-particulier.html" class="nav-item">
                    <i class="ri-dashboard-line"></i> Overzicht
                </a>
                <a href="advertentie-particulier.html" class="nav-item active">
                    <i class="ri-home-4-line"></i> Mijn Advertentie
                </a>
                <a href="beschikbaarheid-particulier.html" class="nav-item">
                    <i class="ri-calendar-line"></i> Beschikbaarheid
                </a>
                <a href="agenda-particulier.html" class="nav-item">
                    <i class="ri-calendar-check-line"></i> Aanvragen
                </a>
                <a href="berichten-particulier.html" class="nav-item">
                    <i class="ri-message-3-line"></i> Berichten
                </a>
                <a href="pakket-beheer.html" class="nav-item">
                    <i class="ri-box-3-line"></i> Pakket Beheer
                    <span id="sidebar-package-usage"
                        style="margin-left: auto; color: #10b981; font-weight: 700;">2/3</span>
                </a>

                <div style="margin: 20px 0; border-top: 1px solid rgba(0,0,0,0.06);"></div>

                <a href="instellingen-particulier.html" class="nav-item">
                    <i class="ri-settings-3-line"></i> Instellingen
                </a>
                <a href="index.html" class="nav-item">
                    <i class="ri-logout-box-line"></i> Uitloggen
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content" style="padding: 0; max-width: 100%;">
            <!-- Immersive Hero Section -->
            <div class="luxury-hero">
                <img id="heroImage" src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=1600&q=80"
                    alt="Luxe Woning">
                <div class="luxury-hero-overlay">
                    <div class="luxury-badge"
                        style="background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.3);">
                        <i class="ri-medal-2-line"></i> Premium Advertentie
                    </div>
                    <h1 id="heroTitle"
                        style="font-size: 3.5rem; font-weight: 800; margin-bottom: 20px; max-width: 800px; text-shadow: 0 4px 20px rgba(0,0,0,0.3);">
                        Moderne Woning in Antwerpen
                    </h1>
                    <div style="display: flex; gap: 30px; font-size: 1.1rem; opacity: 0.9;">
                        <span id="heroAddress"><i class="ri-map-pin-pill-line"></i> Antwerpen, Zuid</span>
                        <span id="heroType"><i class="ri-community-line"></i> Huis</span>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content Container (Overlapping Hero) -->
            <div
                style="padding: 0 60px 60px 60px; position: relative; z-index: 10; display: grid; grid-template-columns: 1fr 350px; gap: 40px;">

                <!-- Left Column: Form Sections -->
                <div>
                    <div class="glass-panel" style="padding: 40px; margin-bottom: 30px; background: white;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px;">
                            <h2 style="font-size: 1.8rem; font-weight: 700;">Specificaties</h2>
                            <div style="display: flex; gap: 12px; align-items: center;">
                                <select id="propertySelector" onchange="switchEditProperty()"
                                    style="padding: 10px 20px; border: 1px solid rgba(0,0,0,0.06); border-radius: 100px; background: #f8fafc; font-weight: 600; cursor: pointer; outline: none;">
                                    <option value="prop-1" selected>Moderne Woning</option>
                                    <option value="prop-2">Penthouse Schelde</option>
                                    <option value="prop-3">Villa Brasschaat</option>
                                </select>
                                <button onclick="createNewPropertyFlow()"
                                    style="background: var(--primary-particulier); color: white; border: none; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; transition: transform 0.2s;"
                                    title="Nieuwe woning toevoegen">
                                    <i class="ri-add-line"></i>
                                </button>
                            </div>
                        </div>

                        <div class="edit-section">
                            <h3 style="color: var(--primary-particulier); margin-bottom: 25px;"><i
                                    class="ri-information-line"></i> Basis Informatie</h3>
                            <div class="form-group luxe-input" style="margin-bottom: 30px;">
                                <label
                                    style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">Titel
                                    van de advertentie</label>
                                <input type="text" id="editTitle" value="Moderne Woning in Antwerpen"
                                    oninput="updatePreview()"
                                    style="font-size: 1.2rem; padding: 12px 0; border: none; border-bottom: 2px solid #eee; border-radius: 0; outline: none; width: 100%; transition: border-color 0.3s;">
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                                <div class="form-group luxe-input">
                                    <label
                                        style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">Transactie
                                        Type</label>
                                    <div
                                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 8px;">
                                        <button id="typeKoop" onclick="setTransactionType('koop')"
                                            style="padding: 12px; border: 2px solid #10b981; background: #10b981; color: white; border-radius: 8px; font-weight: 700; cursor: pointer; transition: all 0.2s;">Te
                                            Koop</button>
                                        <button id="typeHuur" onclick="setTransactionType('huur')"
                                            style="padding: 12px; border: 2px solid #e2e8f0; background: transparent; color: #64748b; border-radius: 8px; font-weight: 700; cursor: pointer; transition: all 0.2s;">Te
                                            Huur</button>
                                    </div>
                                    <input type="hidden" id="editTransactionType" value="koop">
                                </div>
                                <div class="form-group luxe-input">
                                    <label
                                        style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">Vraagprijs
                                        (€)</label>
                                    <input type="number" id="editPrice" value="450000" oninput="updatePreview()"
                                        style="width: 100%; padding: 12px 0; border: none; border-bottom: 2px solid #eee; outline: none; font-weight: 700; font-size: 1.2rem;">
                                </div>
                            </div>

                            <div class="form-group luxe-input">
                                <label
                                    style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">Locatie</label>
                                <input type="text" id="editLocation" value="Antwerpen, Zuid" oninput="updatePreview()"
                                    style="width: 100%; padding: 12px 0; border: none; border-bottom: 2px solid #eee; outline: none;">
                            </div>
                        </div>

                        <div style="margin: 40px 0; border-top: 1px solid #f1f5f9;"></div>

                        <div class="edit-section">
                            <h3 style="color: var(--primary-particulier); margin-bottom: 25px;"><i
                                    class="ri-layout-grid-line"></i> Gedetailleerde Specs</h3>

                            <div class="form-grid"
                                style="grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
                                <div class="form-group">
                                    <label>Woningtype</label>
                                    <select id="editType" onchange="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px; background: white;">
                                        <option value="Huis">Woonhuis</option>
                                        <option value="Appartement">Appartement</option>
                                        <option value="Penthouse">Penthouse</option>
                                        <option value="Villa">Villa</option>
                                        <option value="Studio">Studio</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Slaapkamers</label>
                                    <input type="number" id="editBedrooms" value="3" oninput="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label>Badkamers</label>
                                    <input type="number" id="editBathrooms" value="2" oninput="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label>Oppervlakte (m²)</label>
                                    <input type="number" id="editSurface" value="150" oninput="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label>Verdiepingen</label>
                                    <input type="number" id="editFloors" value="1" oninput="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px;">
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                                <div class="form-group luxe-input">
                                    <label style="font-size: 0.8rem; text-transform: uppercase;">Staat van de
                                        woning</label>
                                    <select id="editState" onchange="updatePreview()"
                                        style="width: 100%; padding: 12px 0; border: none; border-bottom: 2px solid #eee; outline: none; background: transparent;">
                                        <option value="nieuwbouw">Nieuwbouw</option>
                                        <option value="instapklaar">Instapklaar / Gerenoveerd</option>
                                        <option value="goed">Goede staat</option>
                                        <option value="te-renoveren">Te renoveren</option>
                                    </select>
                                </div>
                                <div class="form-group luxe-input">
                                    <label style="font-size: 0.8rem; text-transform: uppercase;">Beschikbaarheid</label>
                                    <input type="text" id="editAvailability" placeholder="Vanaf 1 maart 2024"
                                        oninput="updatePreview()"
                                        style="width: 100%; padding: 12px 0; border: none; border-bottom: 2px solid #eee; border-radius: 0; outline: none;">
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                                <div class="form-group luxe-input">
                                    <label style="font-size: 0.8rem; text-transform: uppercase;">EPC Label</label>
                                    <select id="editEPC" onchange="updatePreview()"
                                        style="width: 100%; padding: 12px 0; border: none; border-bottom: 2px solid #eee; outline: none; background: transparent;">
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                        <option value="D">D</option>
                                        <option value="E">E</option>
                                        <option value="F">F</option>
                                    </select>
                                </div>
                                <div class="form-group luxe-input">
                                    <label style="font-size: 0.8rem; text-transform: uppercase;">EPC Waarde (kWh/m²
                                        jaar)</label>
                                    <input type="number" id="editEPCValue" placeholder="Bv. 120"
                                        oninput="updatePreview()"
                                        style="width: 100%; padding: 12px 0; border: none; border-bottom: 2px solid #eee; border-radius: 0; outline: none;">
                                </div>
                            </div>

                            <div style="margin: 30px 0; border-top: 1px dashed #eee;"></div>

                            <h3 style="font-size: 1rem; margin-bottom: 20px;">Buitenruimte & Parkeren</h3>
                            <div class="form-grid" style="grid-template-columns: repeat(3, 1fr); gap: 20px;">
                                <div class="form-group">
                                    <label>Tuin / Terras m²</label>
                                    <input type="number" id="editGardenSize" placeholder="Bv. 50"
                                        oninput="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label>Garage</label>
                                    <select id="editGarage" onchange="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px;">
                                        <option value="geen">Geen</option>
                                        <option value="1">1 wagen</option>
                                        <option value="2">2+ wagens</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Parking Buiten</label>
                                    <input type="number" id="editParking" placeholder="Aantal plaatsen"
                                        oninput="updatePreview()"
                                        style="width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px;">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Photo Section -->
                    <div class="glass-panel" style="padding: 40px; background: white;">
                        <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 30px;">Media Galerij</h2>
                        <div id="photoGallery"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        </div>
                        <input type="file" id="photoInput" accept="image/*" multiple style="display: none;"
                            onchange="handlePhotoUpload(event)">
                        <div class="photo-upload" onclick="document.getElementById('photoInput').click()"
                            style="border: 2px dashed #cbd5e1; border-radius: var(--radius-lg); padding: 40px; text-align: center; cursor: pointer; transition: all 0.3s;">
                            <i class="ri-image-add-line"
                                style="font-size: 2.5rem; color: var(--primary-particulier); margin-bottom: 15px;"></i>
                            <p style="font-weight: 600;">Klik of sleep foto's om toe te voegen</p>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Hoge kwaliteit foto's verhogen uw
                                kans op verkoop met 40%</p>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Sticky Actions & Health -->
                <div class="col-right" style="position: relative;">
                    <!-- Listing Package Glass Panel -->
                    <div class="glass-panel"
                        style="padding: 25px; margin-bottom: 25px; background: white; border: 1px solid rgba(16, 185, 129, 0.1);">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
                            <div
                                style="width: 40px; height: 40px; border-radius: 10px; background: rgba(16, 185, 129, 0.1); color: #10b981; display: flex; align-items: center; justify-content: center;">
                                <i class="ri-box-3-line" style="font-size: 1.2rem;"></i>
                            </div>
                            <div>
                                <h4 style="font-size: 0.95rem; margin-bottom: 2px;">Listing Pakket</h4>
                                <div style="font-size: 0.75rem; color: #64748b;">Status: <b
                                        style="color: #10b981;">Actief</b></div>
                            </div>
                        </div>

                        <div style="background: #f8fafc; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                            <div
                                style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 8px;">
                                <span style="color: #64748b;">Gekozen Pakket</span>
                                <span style="font-weight: 600;">Premium (60 Dagen)</span>
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 12px;">
                                <span style="color: #64748b;">Woningengebruik</span>
                                <span id="packageUsageCount" style="color: #10b981; font-weight: 700;">2 / 3</span>
                            </div>

                            <!-- New: Active Listings List -->
                            <div style="border-top: 1px solid #e2e8f0; padding-top: 10px;">
                                <p
                                    style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.5px; color: #94a3b8; margin-bottom: 8px; font-weight: 700;">
                                    Actieve Advertenties</p>
                                <div id="activeListingsList" style="display: flex; flex-direction: column; gap: 6px;">
                                    <!-- Dynamic content -->
                                </div>
                            </div>
                        </div>

                        <p style="font-size: 0.7rem; color: #94a3b8; line-height: 1.4; margin-bottom: 12px;">
                            <i class="ri-information-line"></i> Met je huidige pakket kun je tot wel 3 woningen tegelijk
                            online beheren.
                        </p>

                        <button onclick="openPackageModal()"
                            style="width: 100%; border: 1px solid #e2e8f0; background: transparent; padding: 10px; border-radius: 8px; font-size: 0.85rem; cursor: pointer; transition: all 0.2s;">
                            Pakket Beheren
                        </button>
                    </div>

                    <!-- Package Management Modal -->
                    <div id="packageModal"
                        style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
                        <div class="glass-panel"
                            style="background: white; padding: 30px; border-radius: 20px; width: 450px; max-width: 90%;">
                            <h3 style="margin-bottom: 20px;">Pakket Beheer</h3>
                            <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span style="color: #64748b;">Huidig Pakket</span>
                                    <span style="font-weight: 700;">60 Dagen (€149)</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: #64748b;">Einddatum</span>
                                    <span style="font-weight: 700;">30 Januari 2024</span>
                                </div>
                            </div>
                            <div
                                style="background: #f8fafc; border-radius: 12px; padding: 15px; border: 1px solid #e2e8f0; margin-bottom: 20px;">
                                <p style="font-size: 0.85rem; line-height: 1.5; color: #64748b;">
                                    <i class="ri-information-line" style="color: #10b981;"></i>
                                    <strong>Multi-Listing Pakket Actief</strong>.
                                    Met dit pakket kun je meerdere woningen tegelijkertijd online plaatsen. Je hebt
                                    momenteel
                                    nog <strong style="color: #10b981;">1 slot</strong> vrij voor een nieuwe
                                    advertentie.
                                </p>
                            </div>

                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <button class="btn-primary"
                                    style="width: 100%; border-radius: 10px; background: #10b981; color: white; padding: 12px; font-weight: 600; border: none; cursor: pointer;">Pakket
                                    Verlengen</button>
                                <button class="btn-secondary"
                                    style="width: 100%; border-radius: 10px; background: #f1f5f9; color: #1e293b; padding: 12px; font-weight: 600; border: none; cursor: pointer;">Facturen
                                    Downloaden</button>
                                <button onclick="closePackageModal()"
                                    style="width: 100%; border-radius: 10px; background: transparent; color: #64748b; padding: 8px; font-weight: 500; border: none; cursor: pointer;">Sluiten</button>
                            </div>
                        </div>
                    </div>

                    <!-- Health Score Glass Panel -->
                    <div class="glass-panel"
                        style="padding: 30px; margin-bottom: 25px; border-top: 4px solid var(--primary-particulier);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                            <h4 style="font-weight: 700; color: var(--text-main);">Listing Health</h4>
                            <span id="healthLabel"
                                style="font-size: 0.75rem; font-weight: 800; text-transform: uppercase; color: var(--primary-particulier);">Uitstekend</span>
                        </div>
                        <div style="display: flex; gap: 20px; align-items: center;">
                            <div class="health-score-ring" style="width: 60px; height: 60px;">
                                <svg width="60" height="60" viewBox="0 0 80 80">
                                    <circle cx="40" cy="40" r="35" fill="none" stroke="#f1f5f9" stroke-width="8">
                                    </circle>
                                    <circle id="healthScoreCircle" cx="40" cy="40" r="35" fill="none"
                                        stroke="var(--primary-particulier)" stroke-width="8" stroke-dasharray="219.9"
                                        stroke-dashoffset="40" style="transition: stroke-dashoffset 1s ease;"></circle>
                                </svg>
                                <div
                                    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 800; font-size: 0.9rem;">
                                    <span id="healthPercentage">85</span>%
                                </div>
                            </div>
                            <div style="flex: 1;">
                                <p id="healthTip"
                                    style="font-size: 0.85rem; line-height: 1.4; color: var(--text-muted);">Uw
                                    advertentie ziet er goed uit! Voeg een verwarmingstype toe.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Boost Action Glass Panel -->
                    <div id="boostCard" class="glass-panel"
                        style="padding: 30px; margin-bottom: 25px; background: linear-gradient(135deg, #1e293b, #0f172a); color: white; border: none; position: relative; overflow: hidden;">
                        <div id="activeBoostBadge" style="display: none; position: absolute; top: 15px; right: 20px;">
                            <span class="badge-boost" style="background: #fbbf24; color: #78350f; font-size: 0.7rem;"><i
                                    class="ri-flashlight-line"></i> <span id="boostTierLabel">GEBOOST</span></span>
                        </div>

                        <h4 style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                            <i class="ri-flashlight-line" style="color: #fbbf24;"></i> Advertentie Boost
                        </h4>
                        <p id="boostStatusText" style="font-size: 0.85rem; opacity: 0.8; margin-bottom: 20px;">Kies een
                            pakket om uw listing naar de top te brengen.</p>

                        <div id="boostOptionsArea" style="display: block;">
                            <div style="position: relative; margin-bottom: 15px;">
                                <button onclick="selectBoostTier('standard')" class="boost-tier-btn"
                                    style="width: 100%; background: linear-gradient(90deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2)); border: 1px solid rgba(16, 185, 129, 0.4); color: white; padding: 15px; border-radius: 12px; text-align: left; cursor: pointer; position: relative;">
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                                        <span style="font-weight: 700; font-size: 1rem;">Toppositie 7 dagen</span>
                                        <span style="font-weight: 800; color: #10b981;">€ 29</span>
                                    </div>
                                    <div style="font-size: 0.75rem; opacity: 0.7; line-height: 1.4;">Bovenaan resultaten
                                        • Gekleurd frame</div>
                                </button>
                                <div class="boost-info-trigger"
                                    onclick="showBoostInfo('Toppositie 7d', 'Je woning verschijnt 7 dagen lang bovenaan de zoekresultaten in jouw regio. Ideaal voor een snelle boost van de bezichtigingen.')"
                                    style="position: absolute; top: 12px; right: 65px; color: rgba(255,255,255,0.5); cursor: pointer; z-index: 5; background: rgba(0,0,0,0.2); width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">
                                    <i class="ri-information-line"></i>
                                </div>
                            </div>

                            <div style="position: relative; margin-bottom: 15px;">
                                <button onclick="selectBoostTier('premium')" class="boost-tier-btn"
                                    style="width: 100%; background: linear-gradient(90deg, rgba(251, 191, 36, 0.2), rgba(217, 119, 6, 0.2)); border: 1px solid rgba(251, 191, 36, 0.4); color: white; padding: 15px; border-radius: 12px; text-align: left; cursor: pointer; position: relative;">
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                                        <span style="font-weight: 700; font-size: 1rem; color: #fbbf24;">Toppositie 30
                                            dagen</span>
                                        <span style="font-weight: 800; color: #fbbf24;">€ 79</span>
                                    </div>
                                    <div style="font-size: 0.75rem; opacity: 0.7; line-height: 1.4;">Maximale exposure •
                                        Newsletter push</div>
                                </button>
                                <div class="boost-info-trigger"
                                    onclick="showBoostInfo('Toppositie 30d', 'Gedurende een volle maand sta je op de premium posities. Daarnaast ontvangt onze actieve zoekerslijst een speciale newsletter push van jouw pand.')"
                                    style="position: absolute; top: 12px; right: 65px; color: rgba(255,255,255,0.5); cursor: pointer; z-index: 5; background: rgba(0,0,0,0.2); width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">
                                    <i class="ri-information-line"></i>
                                </div>
                            </div>

                            <div style="position: relative; margin-bottom: 5px;">
                                <button onclick="selectBoostTier('regio')" class="boost-tier-btn"
                                    style="width: 100%; background: linear-gradient(90deg, rgba(139, 92, 246, 0.2), rgba(109, 40, 217, 0.2)); border: 1px solid rgba(139, 92, 246, 0.4); color: white; padding: 15px; border-radius: 12px; text-align: left; cursor: pointer; position: relative;">
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                                        <span style="font-weight: 700; font-size: 1rem; color: #a78bfa;">Extra
                                            Regio</span>
                                        <span style="font-weight: 800; color: #a78bfa;">€ 49</span>
                                    </div>
                                    <div style="font-size: 0.75rem; opacity: 0.7; line-height: 1.4;">Zichtbaar in 2
                                        extra gemeentes naar keuze</div>
                                </button>
                                <div class="boost-info-trigger"
                                    onclick="showBoostInfo('Extra Regio', 'Breid je bereik uit naar omliggende gemeentes. Je woning wordt getoond aan zoekers in 2 extra regio\'s naar keuze.')"
                                    style="position: absolute; top: 12px; right: 65px; color: rgba(255,255,255,0.5); cursor: pointer; z-index: 5; background: rgba(0,0,0,0.2); width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">
                                    <i class="ri-information-line"></i>
                                </div>
                            </div>
                        </div>

                        <div id="boostActiveArea" style="display: none;">
                            <div
                                style="background: rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.4); border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                                <div id="boostActiveTitle" style="font-weight: 700; font-size: 1.1rem; color: #fbbf24;">
                                    Premium Boost</div>
                                <div style="font-size: 0.8rem; opacity: 0.7;">Actief • Geniet van maximaal bereik</div>
                            </div>
                            <button onclick="resetBoost()"
                                style="width: 100%; background: transparent; border: 1px solid rgba(255,255,255,0.2); color: rgba(255,255,255,0.6); padding: 8px; border-radius: 8px; font-size: 0.8rem; cursor: pointer;">Stopzetten</button>
                        </div>
                    </div>

                    <!-- Actions Glass Panel -->
                    <div class="glass-panel" style="padding: 30px; background: white;">
                        <button class="btn-primary" onclick="saveAdvertentie()"
                            style="width: 100%; border-radius: 100px; padding: 15px; margin-bottom: 15px; font-weight: 700; background: var(--luxe-gradient); border: none; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                            Wijzigingen Opslaan
                        </button>
                        <button class="btn-secondary" onclick="window.location.href='property.html'"
                            style="width: 100%; border-radius: 100px; padding: 15px; margin-bottom: 25px; font-weight: 700; border: 1px solid #eee;">
                            Live Bekijken
                        </button>

                        <div style="border-top: 1px solid #f1f5f9; padding-top: 20px;">
                            <button onclick="openDeleteModal()"
                                style="width: 100%; background: transparent; border: none; color: #ef4444; font-size: 0.85rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                <i class="ri-delete-bin-line"></i> Deze woning volledig verwijderen
                            </button>
                        </div>
                    </div>

                    <!-- Weekly Status Reports -->
                    <div class="glass-panel"
                        style="padding: 25px; margin-top: 25px; background: #f8fafc; border: 1px dashed #cbd5e1;">
                        <h5
                            style="margin-bottom: 15px; font-weight: 700; display: flex; align-items: center; gap: 8px;">
                            <i class="ri-notification-3-line" style="color: #6366f1;"></i> Wekelijkse Rapporten
                        </h5>
                        <p style="font-size: 0.75rem; color: #64748b; margin-bottom: 15px;">Ontvang elke maandag een
                            overzicht van je advertentie-prestaties.</p>

                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <label
                                style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                                <span style="font-size: 0.85rem; font-weight: 500;">Email Rapport</span>
                                <input type="checkbox" id="emailReports" onchange="saveAdvertentie()" checked>
                            </label>
                            <label
                                style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                                <span style="font-size: 0.85rem; font-weight: 500;">WhatsApp Update</span>
                                <input type="checkbox" id="whatsappReports" onchange="saveAdvertentie()">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal"
        style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 3000; align-items: center; justify-content: center; backdrop-filter: blur(5px);">
        <div class="glass-panel"
            style="background: white; padding: 40px; border-radius: 24px; width: 400px; text-align: center;">
            <div
                style="width: 70px; height: 70px; background: #fee2e2; color: #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 2rem;">
                <i class="ri-error-warning-line"></i>
            </div>
            <h3 style="margin-bottom: 10px;">Woning verwijderen?</h3>
            <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 30px;">Dit kan niet ongedaan worden gemaakt.
                Alle foto's, stats en advertentie-instellingen gaan verloren.</p>

            <div style="display: flex; flex-direction: column; gap: 12px;">
                <button onclick="confirmDelete()"
                    style="width: 100%; padding: 15px; border-radius: 12px; border: none; background: #ef4444; color: white; font-weight: 700; cursor: pointer;">Ja,
                    Verwijderen</button>
                <button onclick="closeDeleteModal()"
                    style="width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0; background: transparent; color: #64748b; font-weight: 600; cursor: pointer;">Annuleren</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="propertyContext.js"></script>
    <script>
        let photos = [];
        let currentBoostTier = null;

        function refreshPropertySelector() {
            const selector = document.getElementById('propertySelector');
            const properties = propertyContext.getAll();
            const currentId = propertyContext.getCurrentId();

            selector.innerHTML = Object.values(properties).map(p =>
                `<option value="${p.id}" ${p.id === currentId ? 'selected' : ''}>${p.name}</option>`
            ).join('');
        }

        function createNewPropertyFlow() {
            const name = prompt("Geef een naam voor de nieuwe woning (bv. 'Appartement Gent'):");
            if (name && name.trim()) {
                const newId = propertyContext.createProperty(name.trim());
                refreshPropertySelector();
            }
        }

        function setTransactionType(type) {
            document.getElementById('editTransactionType').value = type;
            const koopBtn = document.getElementById('typeKoop');
            const huurBtn = document.getElementById('typeHuur');

            if (type === 'koop') {
                koopBtn.style.background = '#10b981';
                koopBtn.style.color = 'white';
                koopBtn.style.borderColor = '#10b981';
                huurBtn.style.background = 'transparent';
                huurBtn.style.color = '#64748b';
                huurBtn.style.borderColor = '#e2e8f0';
            } else {
                huurBtn.style.background = '#10b981';
                huurBtn.style.color = 'white';
                huurBtn.style.borderColor = '#10b981';
                koopBtn.style.background = 'transparent';
                koopBtn.style.color = '#64748b';
                koopBtn.style.borderColor = '#e2e8f0';
            }
            updatePreview();
        }

        function openPackageModal() {
            document.getElementById('packageModal').style.display = 'flex';
        }

        function closePackageModal() {
            document.getElementById('packageModal').style.display = 'none';
        }

        function loadAdvertentieForProperty() {
            try {
                if (!window.propertyContext) {
                    console.error('PropertyContext not found');
                    return;
                }
                const propertyId = propertyContext.getCurrentId();
                const data = propertyContext.getData('advertentie');

                refreshPropertySelector();

                if (data) {
                    // Load saved data
                    document.getElementById('editTitle').value = data.title || '';
                    document.getElementById('editPrice').value = data.price || '';
                    document.getElementById('editLocation').value = data.location || '';
                    document.getElementById('editBedrooms').value = data.bedrooms || 3;
                    document.getElementById('editBathrooms').value = data.bathrooms || 2;
                    document.getElementById('editSurface').value = data.surface || 150;
                    document.getElementById('editType').value = data.type || 'Huis';

                    const transType = data.transactionType || 'koop';
                    setTransactionType(transType);

                    document.getElementById('editEPC').value = data.epc || 'A';
                    document.getElementById('editFloors').value = data.floors || 1;
                    document.getElementById('editState').value = data.state || 'instapklaar';
                    document.getElementById('editAvailability').value = data.availability || '';
                    document.getElementById('editEPCValue').value = data.epcValue || '';
                    document.getElementById('editGardenSize').value = data.gardenSize || '';
                    document.getElementById('editGarage').value = data.garage || 'geen';
                    document.getElementById('editParking').value = data.parking || '';

                    updateBoostUI(data.boostTier || null);

                    if (data.photos && data.photos.length > 0) {
                        photos = data.photos;
                    } else {
                        photos = [];
                    }
                    renderPhotoGallery();
                    updatePreview();
                } else {
                    // Initialize from property context defaults
                    const property = propertyContext.getCurrent();
                    document.getElementById('editTitle').value = property.name || '';
                    document.getElementById('editLocation').value = property.address || '';
                    document.getElementById('editPrice').value = property.price ? property.price.toString().replace(/[^\d]/g, '') : '';

                    setTransactionType('koop');

                    // Set reasonable spec defaults
                    document.getElementById('editBedrooms').value = 3;
                    document.getElementById('editBathrooms').value = 2;
                    document.getElementById('editSurface').value = 150;
                    document.getElementById('editType').value = 'Huis';
                    document.getElementById('editEPC').value = 'A';
                    document.getElementById('editFloors').value = 1;

                    if (property.image) {
                        photos = [{ url: property.image, isCover: true, name: 'Default' }];
                    } else {
                        photos = [];
                    }
                    renderPhotoGallery();
                    updateBoostUI(null);

                    // Reset reports for new property
                    if (document.getElementById('emailReports')) document.getElementById('emailReports').checked = true;
                    if (document.getElementById('whatsappReports')) document.getElementById('whatsappReports').checked = false;

                    updatePreview();
                }

                // Load report settings specifically
                const settings = propertyContext.getData('settings');
                if (settings) {
                    if (document.getElementById('emailReports')) document.getElementById('emailReports').checked = settings.emailReports;
                    if (document.getElementById('whatsappReports')) document.getElementById('whatsappReports').checked = settings.whatsappReports;
                }

                refreshPackageUsageUI();
            } catch (err) {
                console.error('Error loading advertisement:', err);
            }
        }

        function refreshPackageUsageUI() {
            const container = document.getElementById('activeListingsList');
            const countLabel = document.getElementById('packageUsageCount');
            if (!container || !countLabel) return;

            const allProps = propertyContext.getAll();
            const activeProps = allProps.filter(p => p.status === 'active');
            const limit = 3; // Simulating Premium package limit

            countLabel.textContent = `${activeProps.length} / ${limit}`;

            container.innerHTML = activeProps.map(p => `
                <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 10px; border-radius: 8px; border: 1px solid #f1f5f9; transition: all 0.2s;">
                    <span style="font-size: 0.8rem; font-weight: 600; color: #1e293b; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 140px;">${p.name}</span>
                    <button onclick="switchAndEdit('${p.id}')" style="background: ${p.id === propertyContext.getCurrentId() ? '#f1f5f9' : 'transparent'}; border: 1px solid #e2e8f0; color: #64748b; font-size: 0.65rem; padding: 4px 8px; border-radius: 6px; cursor: pointer; font-weight: 700;">
                        ${p.id === propertyContext.getCurrentId() ? 'HUIDIG' : 'BEWERK'}
                    </button>
                </div>
            `).join('');

            // Update sidebar too
            const sidebarUsage = document.getElementById('sidebar-package-usage');
            if (sidebarUsage) sidebarUsage.textContent = `${activeProps.length}/${limit}`;
        }

        function switchAndEdit(id) {
            document.getElementById('propertySelector').value = id;
            propertyContext.switch(id);
        }

        function switchEditProperty() {
            const propertyId = document.getElementById('propertySelector').value;
            propertyContext.switch(propertyId);
        }

        window.addEventListener('propertyChanged', (e) => {
            console.log('Property changed:', e.detail.property.name);
            loadAdvertentieForProperty();
        });

        function updatePreview() {
            try {
                const title = document.getElementById('editTitle')?.value || '';
                const location = document.getElementById('editLocation')?.value || '';
                const houseType = document.getElementById('editType')?.value || 'Huis';
                const transType = document.getElementById('editTransactionType')?.value || 'koop';

                const heroTitle = document.getElementById('heroTitle');
                if (heroTitle) heroTitle.textContent = title || 'Naamloze Advertentie';

                const heroAddress = document.getElementById('heroAddress');
                if (heroAddress) heroAddress.innerHTML = `<i class="ri-map-pin-pill-line"></i> ${location || 'Geen locatie'}`;

                const heroType = document.getElementById('heroType');
                if (heroType) heroType.innerHTML = `<i class="ri-community-line"></i> ${houseType}`;

                const badge = document.querySelector('.luxury-badge');
                if (badge) {
                    // Visionary Logic: Only show Premium if boosted or specifically flagged
                    if (currentBoostTier === 'premium') {
                        badge.innerHTML = `<i class="ri-medal-2-line"></i> Premium Advertentie • Te ${transType === 'koop' ? 'Koop' : 'Huur'}`;
                        badge.style.background = 'var(--luxe-gradient)';
                        badge.style.display = 'inline-flex';
                    } else if (currentBoostTier === 'standard') {
                        badge.innerHTML = `<i class="ri-flashlight-line"></i> Gebooste Advertentie • Te ${transType === 'koop' ? 'Koop' : 'Huur'}`;
                        badge.style.background = 'linear-gradient(90deg, #10b981, #059669)';
                        badge.style.display = 'inline-flex';
                    } else if (currentBoostTier === 'regio') {
                        badge.innerHTML = `<i class="ri-global-line"></i> Regio Power • Te ${transType === 'koop' ? 'Koop' : 'Huur'}`;
                        badge.style.background = 'linear-gradient(90deg, #8b5cf6, #6d28d9)';
                        badge.style.display = 'inline-flex';
                    } else {
                        badge.innerHTML = `<i class="ri-home-4-line"></i> Standaard Listing • Te ${transType === 'koop' ? 'Koop' : 'Huur'}`;
                        badge.style.background = '#64748b';
                        badge.style.display = 'inline-flex';
                    }
                }

                calculateHealth();

                if (photos.length > 0) {
                    const cover = photos.find(p => p.isCover) || photos[0];
                    const heroImage = document.getElementById('heroImage');
                    if (heroImage) heroImage.src = cover.url;
                }
            } catch (err) {
                console.error('Error updating preview:', err);
            }
        }

        function saveAdvertentie() {
            try {
                const advertentie = {
                    title: document.getElementById('editTitle')?.value || '',
                    price: document.getElementById('editPrice')?.value || '',
                    location: document.getElementById('editLocation')?.value || '',
                    bedrooms: document.getElementById('editBedrooms')?.value || 3,
                    bathrooms: document.getElementById('editBathrooms')?.value || 2,
                    surface: document.getElementById('editSurface')?.value || 150,
                    type: document.getElementById('editType')?.value || 'Huis',
                    transactionType: document.getElementById('editTransactionType')?.value || 'koop',
                    epc: document.getElementById('editEPC')?.value || 'A',
                    floors: document.getElementById('editFloors')?.value || 1,
                    state: document.getElementById('editState')?.value || 'instapklaar',
                    availability: document.getElementById('editAvailability')?.value || '',
                    epcValue: document.getElementById('editEPCValue')?.value || '',
                    gardenSize: document.getElementById('editGardenSize')?.value || '',
                    garage: document.getElementById('editGarage')?.value || 'geen',
                    parking: document.getElementById('editParking')?.value || '',
                    boostTier: currentBoostTier,
                    photos: photos
                };

                if (window.propertyContext) {
                    propertyContext.saveData('advertentie', advertentie);

                    // Save notification settings separately
                    const settings = {
                        emailReports: document.getElementById('emailReports')?.checked || false,
                        whatsappReports: document.getElementById('whatsappReports')?.checked || false
                    };
                    propertyContext.saveData('settings', settings);

                    alert(`✅ Luxe Advertentie opgeslagen!`);
                }
            } catch (err) {
                console.error('Error saving advertentie:', err);
                alert('❌ Er ging iets mis bij het opslaan.');
            }
        }

        function handlePhotoUpload(event) {
            const files = Array.from(event.target.files);
            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    photos.push({ url: e.target.result, isCover: photos.length === 0, name: file.name });
                    renderPhotoGallery();
                    updatePreview();
                };
                reader.readAsDataURL(file);
            });
        }

        function renderPhotoGallery() {
            const gallery = document.getElementById('photoGallery');
            gallery.innerHTML = photos.map((photo, index) => `
                <div style="position: relative; border-radius: 12px; overflow: hidden; border: ${photo.isCover ? '3px solid #10b981' : '2px solid rgba(0,0,0,0.05)'};">
                    <img src="${photo.url}" style="width: 100%; height: 150px; object-fit: cover;">
                    <div style="position: absolute; top: 8px; right: 8px; display: flex; gap: 4px;">
                        <button onclick="deletePhoto(${index})" style="background: #ef4444; color: white; border: none; width: 28px; height: 28px; border-radius: 50%; cursor: pointer;"><i class="ri-delete-bin-line"></i></button>
                    </div>
                </div>
            `).join('');
        }

        function deletePhoto(index) {
            photos.splice(index, 1);
            if (photos.length > 0 && !photos.some(p => p.isCover)) photos[0].isCover = true;
            renderPhotoGallery();
            updatePreview();
        }

        function showBoostInfo(title, text) {
            alert(`💡 ${title}\n\n${text}`);
        }

        function selectBoostTier(tier) {
            currentBoostTier = tier;
            saveAdvertentie();
            updateBoostUI(tier);
        }

        function resetBoost() {
            currentBoostTier = null;
            saveAdvertentie();
            updateBoostUI(null);
        }

        function updateBoostUI(tier) {
            const options = document.getElementById('boostOptionsArea');
            const active = document.getElementById('boostActiveArea');
            const badge = document.getElementById('activeBoostBadge');
            const label = document.getElementById('boostTierLabel');
            const status = document.getElementById('boostStatusText');
            const activeTitle = document.getElementById('boostActiveTitle');

            if (tier) {
                options.style.display = 'none';
                active.style.display = 'block';
                badge.style.display = 'block';
                status.textContent = "Je advertentie geniet momenteel van extra bereik.";
                activeTitle.textContent = tier === 'standard' ? 'Standaard Boost (7d)' : (tier === 'premium' ? 'Premium Boost (30d)' : 'Extra Regio Boost');
                label.textContent = tier === 'premium' ? 'PREMIUM BOOST' : 'ACTIVE BOOST';
            } else {
                options.style.display = 'block';
                active.style.display = 'none';
                badge.style.display = 'none';
                status.textContent = "Kies een pakket om uw listing naar de top te brengen.";
            }
        }

        function calculateHealth() {
            let score = 0;
            let tips = [];
            const title = document.getElementById('editTitle').value || '';
            const description = "mock"; // In a real app we'd check editDescription

            // Visionary metrics
            if (title.length > 25) score += 15; else tips.push("Langere titel (>25 tekens)");
            if (parseInt(document.getElementById('editPrice').value) > 0) score += 10;
            if (photos.length >= 8) score += 20; else if (photos.length < 5) tips.push("Voeg minstens 8 foto's toe");
            if (document.getElementById('editEPCValue').value) score += 10; else tips.push("EPC waarde ontbreekt");

            // International Standards
            const hasDetailedSpecs = document.getElementById('editSurface').value > 0 && document.getElementById('editBedrooms').value > 0;
            if (hasDetailedSpecs) score += 15; else tips.push("Volledige specificaties");

            const hasExtraInfo = document.getElementById('editGardenSize').value || document.getElementById('editGarage').value !== 'geen';
            if (hasExtraInfo) score += 10;

            // Global reach factors
            if (currentBoostTier === 'premium') score += 20;
            else if (currentBoostTier) score += 10;

            score = Math.min(score, 100);
            document.getElementById('healthPercentage').textContent = score;
            const offset = 219.9 - (219.9 * score / 100);
            document.getElementById('healthScoreCircle').style.strokeDashoffset = offset;

            const label = document.getElementById('healthLabel');
            if (score < 40) { label.textContent = 'Zwak'; label.style.color = '#ef4444'; }
            else if (score < 80) { label.textContent = 'Goed'; label.style.color = '#f59e0b'; }
            else { label.textContent = 'Uitstekend'; label.style.color = '#10b981'; }

            if (tips.length > 0) document.getElementById('healthTip').innerHTML = `<i class="ri-lightbulb-line"></i> Tip: ${tips[0]}`;
            else document.getElementById('healthTip').textContent = 'Top-tier listing! Wereldklasse!';
        }

        function openDeleteModal() {
            document.getElementById('deleteModal').style.display = 'flex';
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').style.display = 'none';
        }

        function confirmDelete() {
            const propertyId = propertyContext.getCurrentId();
            if (propertyContext.deleteProperty(propertyId)) {
                alert('Woning is succesvol verwijderd.');
                window.location.reload();
            }
        }

        window.addEventListener('load', loadAdvertentieForProperty);
    </script>
    <script src="dashboard-nav.js"></script>
</body>

</html>