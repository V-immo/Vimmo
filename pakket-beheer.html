<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pakket Beheer | Vimmo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">
    <link rel="stylesheet" href="style.css">
    <style>
        .package-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 40px;
        }

        .usage-progress {
            width: 100%;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            margin: 20px 0;
        }

        .usage-bar {
            height: 100%;
            background: linear-gradient(to right, #10b981, #34d399);
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .pakket-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.02);
        }

        .active-property-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8fafc;
            border-radius: 12px;
            margin-bottom: 12px;
            border: 1px solid transparent;
            transition: all 0.2s;
        }

        .active-property-row:hover {
            border-color: #10b981;
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .status-pill {
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .status-pill.online {
            background: #dcfce7;
            color: #166534;
        }

        .status-pill.concept {
            background: #fef9c3;
            color: #854d0e;
        }
    </style>
</head>

<body>
    <div class="dashboard-particulier">
        <!-- Sidebar -->
        <aside class="sidebar">
            <a href="index.html" class="sidebar-brand">
                <span class="logo-v">V</span> <span class="logo-i">I</span><span class="logo-mmo">MMO</span>
            </a>

            <nav class="sidebar-nav">
                <a href="dashboard-particulier.html" class="nav-item">
                    <i class="ri-dashboard-line"></i> Overzicht
                </a>
                <a href="advertentie-particulier.html" class="nav-item">
                    <i class="ri-home-4-line"></i> Mijn Advertentie
                </a>
                <a href="beschikbaarheid-particulier.html" class="nav-item">
                    <i class="ri-calendar-line"></i> Beschikbaarheid
                </a>
                <a href="agenda-particulier.html" class="nav-item">
                    <i class="ri-calendar-check-line"></i> Aanvragen
                </a>
                <a href="berichten-particulier.html" class="nav-item">
                    <i class="ri-message-3-line"></i> Berichten
                </a>
                <a href="pakket-beheer.html" class="nav-item active">
                    <i class="ri-box-3-line"></i> Pakket Beheer
                    <span id="sidebar-package-usage"
                        style="margin-left: auto; color: #10b981; font-weight: 700;">-/-</span>
                </a>

                <div style="margin: 20px 0; border-top: 1px solid rgba(0,0,0,0.06);"></div>

                <a href="instellingen-particulier.html" class="nav-item">
                    <i class="ri-settings-3-line"></i> Instellingen
                </a>
                <a href="index.html" class="nav-item">
                    <i class="ri-logout-box-line"></i> Uitloggen
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header style="margin-bottom: 40px;">
                <h1 style="font-size: 2.2rem; margin-bottom: 8px;">Pakket & Beheer</h1>
                <p style="color: var(--text-muted);">Beheer je advertentieslots en pakketinstellingen.</p>
            </header>

            <div class="package-stats">
                <div class="stat-card" style="border-left-color: #10b981;">
                    <div class="stat-label">Huidig Pakket</div>
                    <div class="stat-value" style="font-size: 1.5rem;">Optimaal (60 Dagen)</div>
                    <div style="font-size: 0.85rem; color: #64748b; margin-top: 8px;">Geldig t/m 30 jan 2024</div>
                </div>
                <div class="stat-card" style="border-left-color: #3b82f6;">
                    <div class="stat-label">Advertentie Slots</div>
                    <div class="stat-value" id="slot-count">2 / 3</div>
                    <div style="font-size: 0.85rem; color: #64748b; margin-top: 8px;">1 slot beschikbaar</div>
                </div>
                <div class="stat-card" style="border-left-color: #f59e0b;">
                    <div class="stat-label">Volgende Factuur</div>
                    <div class="stat-value">â‚¬ 149</div>
                    <div style="font-size: 0.85rem; color: #64748b; margin-top: 8px;">Handmatige verlenging</div>
                </div>
            </div>

            <div class="pakket-card">
                <h3 style="margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                    <i class="ri-home-gear-line" style="color: #10b981;"></i>
                    Actieve Woningadvertenties
                </h3>

                <div class="usage-progress">
                    <div id="usage-progress-bar" class="usage-bar" style="width: 66%;"></div>
                </div>

                <div id="active-properties-list">
                    <!-- Loaded via JS -->
                </div>

                <div
                    style="margin-top: 30px; padding-top: 25px; border-top: 1px solid #f1f5f9; display: flex; justify-content: space-between; align-items: center;">
                    <p style="font-size: 0.9rem; color: #64748b;">Je hebt nog ruimte voor 1 extra advertentie.</p>
                    <button onclick="window.location.href='advertentie-particulier.html?new=true'" class="btn-primary"
                        style="background: #10b981; padding: 10px 20px; border-radius: 8px;">
                        <i class="ri-add-line"></i> Nieuwe Advertentie
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script src="propertyContext.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            refreshUI();
        });

        function refreshUI() {
            const list = document.getElementById('active-properties-list');
            const slotCount = document.getElementById('slot-count');
            const progressBar = document.getElementById('usage-progress-bar');
            const sidebarUsage = document.getElementById('sidebar-package-usage');

            if (!list) return;

            const allProps = propertyContext.getAll();
            const activeProps = Object.values(allProps).filter(p => p.status === 'active');
            const limit = 3;

            slotCount.textContent = `${activeProps.length} / ${limit}`;
            progressBar.style.width = `${(activeProps.length / limit) * 100}%`;
            if (sidebarUsage) sidebarUsage.textContent = `${activeProps.length}/${limit}`;

            list.innerHTML = activeProps.map(p => `
                <div class="active-property-row">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 1.5rem;">${p.emoji}</div>
                        <div>
                            <div style="font-weight: 700; color: #1e293b;">${p.name}</div>
                            <div style="font-size: 0.8rem; color: #64748b;">${p.address}</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <span class="status-pill online">Online</span>
                        <button onclick="window.location.href='advertentie-particulier.html?prop=${p.id}'" 
                                style="background: white; border: 1px solid #e2e8f0; padding: 6px 14px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                            Beheren
                        </button>
                    </div>
                </div>
            `).join('');
        }
    </script>
    <script src="dashboard-nav.js"></script>
</body>

</html>